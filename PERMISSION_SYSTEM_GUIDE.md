# 🔐 sailor工作室 - 多级权限管理系统

> 完整的用户权限管理解决方案，支持三级角色权限控制

## 🎯 **系统概览**

### **角色体系**
| 角色 | 图标 | 权限范围 | 功能描述 |
|------|------|----------|----------|
| **超级管理员** | 🔑 | 全部权限 | 拥有所有系统权限，包括用户管理和系统设置 |
| **管理员** | 👤 | 内容管理 | 可管理文章、项目、成员，但不能管理其他用户 |
| **普通用户** | 👨‍💻 | 个人资料 | 只能编辑个人资料和上传头像 |

### **权限列表**
```typescript
// 内容管理权限
MANAGE_ARTICLES     // 管理博客文章
MANAGE_PROJECTS     // 管理项目展示  
MANAGE_MEMBERS      // 管理团队成员

// 用户管理权限
MANAGE_USERS        // 管理用户账户
MANAGE_ROLES        // 管理角色权限

// 系统管理权限
MANAGE_SYSTEM       // 系统设置管理
VIEW_ANALYTICS      // 查看数据分析

// 个人操作权限
EDIT_PROFILE        // 编辑个人资料
UPLOAD_AVATAR       // 上传个人头像
```

---

## 🚀 **功能特性**

### **1. 多账户登录系统**
- ✅ **角色选择**: 一键切换不同角色进行测试
- ✅ **自动填充**: 点击角色按钮自动填充对应账户信息
- ✅ **登录验证**: 支持多种用户类型登录
- ✅ **会话管理**: JWT令牌管理，自动登录状态恢复

**演示账户:**
```
🔑 超级管理员: superadmin / 123456
👤 管理员:     admin / 123456  
👨‍💻 普通用户:   user / 123456
```

### **2. 个人资料管理**
- ✅ **头像上传**: 支持图片文件上传，2MB限制
- ✅ **信息编辑**: 姓名、简介、手机、地区等
- ✅ **技能标签**: 动态添加/删除技能标签
- ✅ **实时预览**: 头像和信息实时更新显示

### **3. 权限控制系统**
- ✅ **页面级权限**: 根据角色显示/隐藏功能模块
- ✅ **功能级权限**: 按钮和操作的细粒度权限控制
- ✅ **动态菜单**: 根据权限动态显示导航菜单
- ✅ **路由守卫**: 未授权访问自动跳转登录

### **4. 用户界面优化**
- ✅ **用户头像**: 导航栏显示真实头像或初始字母
- ✅ **角色标识**: 清晰的角色标签和颜色区分
- ✅ **下拉菜单**: 优雅的用户菜单，包含快捷操作
- ✅ **响应式设计**: 移动端和桌面端完美适配

---

## 🔧 **使用指南**

### **登录测试流程**

1. **访问登录页面**
   ```
   http://localhost:5173/login
   ```

2. **选择测试角色**
   - 点击角色按钮会自动填充账户信息
   - 每个角色有不同的权限范围

3. **验证权限功能**
   - 登录后查看仪表板显示的功能模块
   - 不同角色看到的选项不同

### **个人资料管理**

1. **访问个人资料页面**
   ```
   路径: /admin/profile
   入口: 导航栏用户菜单 > 个人资料
   ```

2. **头像上传操作**
   - 点击头像右下角的相机图标
   - 选择图片文件（支持 jpg、png 等格式）
   - 系统会自动验证文件类型和大小

3. **编辑个人信息**
   - 修改姓名、简介、联系方式等
   - 添加/删除技能标签
   - 点击"保存更改"即时生效

### **权限验证**

**超级管理员** 🔑
```
✅ 个人资料管理
✅ 文章管理
✅ 项目管理  
✅ 成员管理
✅ 系统管理（预留）
```

**管理员** 👤
```
✅ 个人资料管理
✅ 文章管理
✅ 项目管理
✅ 成员管理
❌ 系统管理
```

**普通用户** 👨‍💻
```
✅ 个人资料管理
❌ 文章管理
❌ 项目管理
❌ 成员管理
❌ 系统管理
```

---

## 💻 **技术实现**

### **1. 权限存储结构**
```typescript
interface User {
  id: number
  username: string
  email: string
  role: UserRole
  avatar?: string
  profile?: UserProfile
  permissions: Permission[]
}
```

### **2. 权限检查方法**
```typescript
// 在组件中使用
const authStore = useAuthStore()

// 检查具体权限
const canManageArticles = authStore.hasPermission(Permission.MANAGE_ARTICLES)

// 检查角色
const isSuperAdmin = authStore.isSuperAdmin
const isAdmin = authStore.isAdmin
```

### **3. 模板中使用**
```vue
<!-- 基于权限显示组件 -->
<router-link v-if="hasPermission('MANAGE_ARTICLES')" to="/admin/articles">
  文章管理
</router-link>

<!-- 基于角色显示组件 -->
<div v-if="authStore.isSuperAdmin">
  超级管理员专属功能
</div>
```

### **4. 路由守卫**
```typescript
router.beforeEach((to, from, next) => {
  const authStore = useAuthStore()
  
  if (to.meta.requiresAuth && !authStore.isAuthenticated) {
    next({ name: 'login', query: { redirect: to.fullPath } })
  } else {
    next()
  }
})
```

---

## 🎨 **界面展示**

### **登录页面**
- 🎯 角色选择器，一键切换测试账户
- 📱 响应式设计，支持移动端
- 💡 清晰的权限说明和演示账户信息

### **导航栏**
- 👤 用户头像显示（真实图片或字母占位符）
- 🔖 角色标签显示（颜色区分不同角色）
- 📋 下拉菜单包含个人资料和管理后台入口

### **个人资料页**
- 📷 头像上传功能，支持实时预览
- 📝 完整的个人信息编辑表单
- 🏷️ 动态技能标签管理
- 📊 账户信息展示区域

### **管理后台**
- 🚀 权限控制的功能模块显示
- 📈 用户角色和权限状态展示
- ⚡ 快捷操作面板
- 🔒 基于权限的菜单控制

---

## 🚀 **下一步扩展**

### **即将推出的功能**
- [ ] **用户管理界面** - 超级管理员可管理其他用户
- [ ] **权限分配界面** - 灵活的权限分配系统
- [ ] **操作日志记录** - 记录用户的重要操作
- [ ] **批量权限操作** - 批量修改用户权限
- [ ] **API权限控制** - 后端接口的权限验证

### **技术优化计划**
- [ ] **数据持久化** - 连接真实数据库
- [ ] **文件服务器** - 真实的文件上传服务
- [ ] **邮件通知** - 权限变更通知机制
- [ ] **安全增强** - 密码强度验证、登录限制等
- [ ] **审计功能** - 完整的操作审计追踪

---

## 📱 **移动端支持**

- ✅ **响应式布局** - 自适应不同屏幕尺寸
- ✅ **触摸优化** - 移动端触摸交互优化
- ✅ **头像上传** - 移动端文件选择支持
- ✅ **菜单适配** - 移动端折叠菜单

---

## 🎉 **总结**

这个多级权限管理系统提供了完整的用户管理解决方案，包括：

- 🔐 **安全的权限控制** - 三级角色，细粒度权限
- 👤 **完善的用户管理** - 个人资料、头像上传
- 🎨 **优雅的用户界面** - 现代化设计，响应式布局
- 🚀 **易于扩展** - 模块化架构，便于添加新功能

无论是个人项目还是团队协作，这套系统都能满足不同层次的权限管理需求！ 